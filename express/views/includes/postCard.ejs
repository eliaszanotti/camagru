<div
	class="flex flex-col bg-base-200 border border-base-300 gap-4 p-4 rounded-box"
	selector-post-single
	data-post-id="<%= post._id %>"
>
	<div class="flex gap-2 items-center justify-between">
		<!-- TODO mettre dans des include les truc quon partage avec postSingle -->
		<h1 class="font-bold"><%= user.username %></h1>
		<p class="text-sm text-gray-500">
			<!-- prettier-ignore -->
			<%=
				new Date(post.createdAt).toLocaleDateString("en-US", {
					year: "numeric",
					month: "long",
					day: "numeric",
					hour: "numeric",
					minute: "numeric",
					hour12: false,
				})
			%>
		</p>
	</div>
	<div class="relative rounded-field overflow-hidden">
		<img
			src="<%= post.imageUrl %>"
			alt="Post Image"
			class="w-full aspect-square object-cover select-none"
		/>
		<!-- TODO voir si le selector sert vraiment -->
		<div
			class="absolute inset-0 opacity-0 hover:opacity-100 bg-primary/80 flex items-center justify-center transition-opacity duration-300"
			selector-post-vote
			data-post-id="<%= post._id %>"
		>
			<%- include("../icons/heartFilled.ejs", { svgClass: "" }) %>
		</div>
	</div>

	<div class="flex flex-col gap-2">
		<div class="flex">
			<button class="btn btn-square btn-ghost">
				<!-- prettier-ignore -->
				<% if (isLiked) { %>
					<%- include("../icons/heartFilled.ejs", { svgClass: "fill-primary" }) %>
				<% } else { %>
					<%- include("../icons/heart.ejs") %>
				<% } %>
			</button>
			<a href="/post/id/<%= post._id %>" class="btn btn-square btn-ghost">
				<%- include("../icons/messageCircle.ejs") %>
			</a>
		</div>
		<% if (lastComment) { %>
		<div class="flex flex-col gap-2">
			<div class="flex gap-2">
				<p class="text-sm font-bold">
					<%= lastComment.userId.username %>
				</p>
				<p class="text-sm text-gray-500">
					<!-- prettier-ignore -->
					<%= new Date(lastComment.createdAt).toLocaleDateString("en-US", {
						year: "numeric",
						month: "long",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					}) %>
				</p>
			</div>
			<p class="line-clamp-1"><%= lastComment.content %></p>
		</div>
		<% } %>
	</div>
</div>
