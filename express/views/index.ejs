<%- include('includes/head', { title: 'Home' }) %>
<main class="flex flex-col items-center min-h-screen py-10">
	<section
		id="posts"
		class="grid gap-10 max-w-3xl w-full rounded-box p-10"
	></section>
</main>

<script>
	function getDualPosts(count = 1) {
		for (let i = 0; i < count; i++) {
			fetch(`/post/get-dual`)
				.then((response) => response.text())
				.then((data) => {
					posts.innerHTML += data;
				})
				.catch((error) => {
					console.error("Error fetching posts:", error);
				});
		}
	}

	document.addEventListener("DOMContentLoaded", getDualPosts(5));

	window.addEventListener("scroll", () => {
		if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
			getDualPosts(3);
		}
	});
</script>
